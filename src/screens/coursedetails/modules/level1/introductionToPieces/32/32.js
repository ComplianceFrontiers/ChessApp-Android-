import React, { useContext, useState } from "react";
import {
  Image,
  ScrollView,
  StyleSheet,
  Text,
  TouchableOpacity,
  View,
} from "react-native";
import { WebView } from "react-native-webview";
import useGlobalStyles from "../../../../../../styles/globalStyles";
import Header from "../../../../../../components/header/Header";
import { useNavigation, useRoute } from "@react-navigation/native";
import RatingIcon from "../../../../../../assets/svg/ratingIcon.svg";
import AboutTab from "../../../../../abouttab/AboutTab";
import CurriculumTab from "../../../../../curriculumtab/CurriculumTab";
import CommonButton from "../../../../../../components/commonbutton/CommonButton";
import ThemeContext from "../../../../../../components/Theme/ThemeContext";
import ClassIcon from "../../../../../../components/classicon/ClassIcon";
import TimeIcon from "../../../../../../components/timeicon/TimeIcon";

const T11 = () => {
  const route = useRoute();
  const globalStyles = useGlobalStyles();
  const navigation = useNavigation();
  const theme = useContext(ThemeContext);

  const tabs = [
    { id: 1, tab: "About" },
    { id: 2, tab: "Curriculum" },
  ];

  const [activeTab, setActiveTab] = useState("About");
  const [showVideo, setShowVideo] = useState(false); // State to toggle video display

  const handleTabs = (item) => {
    setActiveTab(item);
  };

  const renderTabs = () => {
    switch (activeTab) {
      case "Curriculum":
        return <CurriculumTab />;
      default:
        return null;
    }
  };

  return (
    <View style={[styles.mainContain, { backgroundColor: theme.background }]}>
      <ScrollView style={globalStyles.colorBG}>
        <View style={styles.mediaContainer}>
          {!showVideo ? (
            <TouchableOpacity onPress={() => setShowVideo(true)}>
              <Image
                source={require("../../../../../../assets/images/thumbnail.png")}
                style={styles.thumbnail}
              />
            </TouchableOpacity>
          ) : (
          
            <WebView
              source={{ uri: "https://www.youtube.com/embed/vku6EBp4J70" }}
              style={{ width: "100%", height: 300 }}
              allowsFullscreenVideo
            />
          )}
        </View>
        <View style={globalStyles.container}>
          <View style={styles.absoluteIMG}>
            <Header label="" backBTNCLR="white" />
          </View>
        </View>
        <View
          style={[
            globalStyles.contents,
            styles.parallaxContainer,
            { backgroundColor: theme.background },
          ]}
        >
          <View
            style={{
              flexDirection: "row",
              alignItems: "center",
              justifyContent: "space-between",
              width: "100%",
              paddingBottom: "3%",
            }}
          >
            <View
              style={{
                flexDirection: "row",
                alignItems: "center",
                gap: 5,
              }}
            >
              <RatingIcon />
            </View>
          </View>
          <Text style={globalStyles.headingFour}>
            2.2 Major and Minor Pieces
          </Text>
          <View style={styles.classDetailsAndPrice}>
            <View style={styles.classDetails}>
              <ClassIcon />
              <Text style={{ color: theme.color }}>21 Classes</Text>
              <Text style={{ color: theme.color }}>|</Text>
              <TimeIcon />
              <Text style={{ color: theme.color }}>42 Hours</Text>
            </View>
          </View>
          <View style={styles.tabContainer}>
            {tabs.map((item) => (
              <TouchableOpacity
                key={item.id}
                onPress={() => handleTabs(item.tab)}
              >
                <Text
                  style={
                    activeTab === item.tab
                      ? styles.activeTab
                      : styles.inactiveTab
                  }
                >
                  {item.tab}
                </Text>
              </TouchableOpacity>
            ))}
          </View>
          {renderTabs()}
          {activeTab === "About" && (
  <>
          <Text style={globalStyles.paragraph}>
        Now that we know about the different chess pieces, it is crucial to understand their importance in the game. This knowledge is vital when you are deciding whether to attack, defend, capture, or sacrifice a piece. Understanding the value of each piece will help you make informed decisions in these situations.
      </Text>

      {/* Explanation of Piece Values */}
      <Text style={globalStyles.paragraph}>
        Each piece is assigned a numerical value that represents its importance in the game:
      </Text>

      {/* List of Piece Values */}
      <View style={globalStyles.listContainer}>
        <Text style={globalStyles.listItem}>• Queen: 9 Points</Text>
        <Text style={globalStyles.listItem}>• Rook: 5 Points</Text>
        <Text style={globalStyles.listItem}>• Bishop: 3 Points</Text>
        <Text style={globalStyles.listItem}>• Knight: 3 Points</Text>
        <Text style={globalStyles.listItem}>• Pawn: 1 Point</Text>
      </View>

      {/* Classification of Major and Minor Pieces */}
      <Text style={globalStyles.paragraph}>
        Based on their assigned values, chess pieces are classified into two categories: major (more important) pieces and minor (less important) pieces.
      </Text>

      <Text style={globalStyles.paragraph}>
        The Queen and Rook are classified as major pieces due to their higher value and significant influence on the game.
      </Text>

      <Text style={globalStyles.paragraph}>
        The Bishop, Knight, and Pawn are considered minor pieces, as they have lower values and more limited power.
      </Text>

      {/* Explanation of the King's Unique Role */}
      <Text style={globalStyles.paragraph}>
        The King is the most important piece on the board, but it does not fall under either classification because its significance is unique—if the King is captured, the game is lost.
      </Text>
         </>
)}
        </View>
      </ScrollView>
      <View style={[styles.buttonContainer, { backgroundColor: theme.background }]}>
        <TouchableOpacity 
          style={styles.navigationButton}
          onPress={() => navigation.goBack("coursedetails/modules/level1/introductionToPieces/31")} // Replace with your actual logic for Previous
        >
          <Text style={styles.buttonText}>Previous</Text>
        </TouchableOpacity>
        <TouchableOpacity 
          style={styles.navigationButton}
          onPress={() => navigation.navigate("coursedetails/modules/level1/introductionToPieces/33")} // Replace with your next screen name
        >
          <Text style={styles.buttonText}>Next</Text>
        </TouchableOpacity>
      </View>
    </View>
  );
};

const styles = StyleSheet.create({
  image: {
    width: "50%",
    height: 320,
    marginTop: "8%",
  },
  thumbnail: {
    width: "100%",
    height: 300, // Adjust height as necessary
    marginTop: "8%",
  },
  absoluteIMG: {
    position: "absolute",
    top: -270,
    width: "100%",
  },
  parallaxContainer: {
    marginTop: -120,
    width: "100%",
    alignItems: "flex-start",
    paddingTop: "5%",
    backgroundColor: "white",
    borderTopRightRadius: 30,
    borderTopLeftRadius: 30,
  },
  classDetailsAndPrice: {
    flexDirection: "row",
    alignItems: "center",
    justifyContent: "space-between",
    width: "100%",
  },
  classDetails: {
    flexDirection: "row",
    alignItems: "center",
    paddingVertical: "3%",
    gap: 10,
  },
  tabContainer: {
    width: "100%",
    flexDirection: "row",
    alignItems: "center",
    justifyContent: "space-between",
    paddingVertical: "5%",
  },
  activeTab: {
    paddingHorizontal: "17%",
    paddingVertical: "5%",
    borderRadius: 35,
    backgroundColor: "#FC4F72",
    color: "white",
    fontWeight: "600",
  },
  inactiveTab: {
    paddingHorizontal: "17%",
    paddingVertical: "5%",
    borderRadius: 35,
    backgroundColor: "#F1F1F1",
    color: "black",
    fontWeight: "600",
  },
 buttonContainer: {
    flexDirection: "row",
    justifyContent: "space-between",
    padding: 20,
    backgroundColor: "white", // Adjust if necessary
  },
  navigationButton: {
    flex: 1,
    marginHorizontal: 5,
    padding: 15,
    backgroundColor: "#FC4F72", // Change to your desired color
    borderRadius: 10,
    alignItems: "center",
  },
  buttonText: {
    color: "white",
    fontWeight: "bold",
  },
  mainContain: {
    flex: 1,
  },
  mediaContainer: {
    marginVertical: 20,
  },
});

export default T11;
